---
bibliography: papers.bib
csl: 'chinese-gb7714-2005-numeric.csl'
fignos-cleveref: True
fignos-plus-name: 图
fignos-caption-name: 图
---

## 众里寻她千百度[@2022b]
大卫入职之初，总觉得生活少些什么于是他尽力的让自己快乐起来，可是直到他发现自己病了而且病的很厉害也没有找到让他安心的那个东西。他在自己心理无数次的问自己，为什么大学时那么多的数学公式我都会计算推导，为何就没有一个公式能让我的生活稳定下来么？强烈的不自信让他越来越自卑无助。直到有一天他发现了......

### 理财
小戊今年25岁，努力挤出3000元用于定投基金理财！假定小戊投资稳健，所选基金收益长期稳定，投资所得到平均月利率为0.5%，现在我们算一下他未来的期望高度。

首先对发生在离散时间段上存款金额的变化进行建模。设$a_n$表示第n个月月末的数额，a为每个月月初存入额，r为利率。于是有：
$$
\begin{cases}
a_n=(1+r)(a+a_{n-1})\\\\
a_1=(1+r)a
\end{cases}$$
式中的n取值正整数|1,2,...|,可见上面的这个方程可表示无穷多个代数方程，被称为动力系统，动力系统能够描述从一个周期到下一个周期的变化。

@startuml

月初 :存入a
月初 :+
月初 : 上月转存<math>a_{n-1}</math>

月末 :存入a
月末 :+
月末 :上月转存<math>a_{n-1}</math>
月末 :+
月末 :月息<math>r(a+a_{n-1})</math>

月初 -> 月末
@enduml

生活得有目标！按月利率0.5%的收益，小戊月投入3000元的计划，使存入金额超过20000元需要多长时间？将此问题写成数学问题就是：当n为多少时，有$a_n\ge 20000$ 但$a_{n-1}\lt20000$,$a_n$变化规律如下：
$$
\begin{cases}
a_n=(1+0.5\\%)(3000+ a_{n-1})=3015+1.005a_{n-1}\\\\
a_1=(1+0.5\\%)3000=3015
\end{cases}$$

#### 小戊的方法：
假设相邻两个月投资增加的比例是线性增长的即：$xa_n+y=k(xa_{n-1}+y)$   k=1.005
通过对比系数法计算，当x=1时，有y=603000 可见$a_n+603000=(a_1+603000)\times1.005^{n-1}$ 即：$a_n=606015\times1.005^{n-1}-603000$  当$a_n\ge 20000$时，有$$n\ge      \cfrac {\ln \cfrac{623000}{606015}}{\ln1.005}+1 = 6.5422$$ 计算结果表明，经过7个月的时间，小戊可以通过理财达到2万元存款目标。

#### david的方法：
@startuml
Title: 人生应有小目标
start
:<math>n=1</math>;
:<math>a=3000,a_1=1.005a</math>;
repeat 
  
backward:<math>a_n=1.005(a+a_{n-1});n=n+1</math>; 


repeat while (<math>a_n\le 20000 \?</math>)

stop

@enduml

```
def goal():
        n=1
        a=3000
        a1=1.005*a
        a_n=a1
        while(a_n<20000):
                a_n=1.005*(a+a_n)
                n+=1
        return n

a=goal()
print(a)

```

### 安家
随着岁月的流逝，小戊经过一番奋斗后，存款终于可以支付购房款首付了。按目前小戊的还款能力p元，如果他计划以360次还清贷款（假定月息0.5%），他计划申请的贷款额度有多大呢？

假定$a_n$表示第n个月月初时小戊剩余的借款数额，p是他每个月月初的还款额，r为借款利率，则有：$$a_n=(1+r)\times(a_{n-1}-p)$$  现将模型变为$a_{n-1}={ a_n\over(1+r)}  +p$,如果在第360次还清贷款，将求解的问题变为由$a_{360}=0$反推算至$a_1$,便可得到小戊的计划贷款额，如下表方案（月息0.5%）

| 计划月供（元）      | 计划贷款额（元） |
| ----------- | ----------- |
| 1500      | 251190       |
| 3000   | 502380        |
| 5000   | 837290	|

```
def  loan(p):
	payment=0
	intrest_m=0.005
	month=360-1

	while(month!=0):
		payment=payment / (1+intrest_m) +p
		month-=1

	return payment

```

### 养老
总有一天小戊会变成老戊。未雨绸缪，养老问题需要长远考虑。

假定小戊从35岁开始考虑养老问题，计划每个月存一笔钱p到60岁退休为止，等60岁退休后就每个月从中领取c元作为生活费，假定可持续提取20年，那么他每个月应该存款多少？（仍假定每月利率0.5%）

问题分两步解决，假定年轻时的存钱与年老时的取钱都在月初进行：
第一步,计算60岁退休所存款额，可使年老时每月持续提取c元20年。

设$a_n$表示在退休期间第n个月月初领取c元后所余的总额，则：$$a_n=(1+0.5\\%)a_{n-1}-c$$ 由于$a_n- \frac c {0.005}=1.005(a_{n-1}-\frac c{0.005})$则$a_n=1.005^{n-1}(a_1-\frac c {0.005})+ \frac c {0.005}$

令$a_{240}=0$,于是有$a_1={c\over{0.005}}(1-1.005^{-239})$

可见退休后每月持续提取c元20年，则在退休时存款达到$(a_1+c)$元

第二步，计算现在每个月月初存多少钱（p）,使得25年（现在35岁）后存款达到$(a_1+c)$元。

设$b_n$为存款期间第n个月月初存款后的数额，则：
$$b_n=(1+0.5\\%)b_{n-1}+p$$ 同样地可解得$b_n=1.005^{n-1}(b_1+ \frac p {0.005})-\frac p{0.005}$

令$b_{300}=a_1+c$,$b_1=p$ 于是有：$$p=\cfrac {a_1+c}{1.005^{299}(1+\frac 1{0.005})-\frac 1{0.005}}$$

| 年老后每月提取c元20年      | 年轻时每月存款p元25年 |
| ----------- | ----------- |
| 1000      | 202.42       |
| 2000   | 404.85        |
| 5000   | 1012.1	|

按此模式（月息0.5%）的前提下，月存p元25年后，月取c元20年的模型如下：
$$c=\cfrac {1.005^{299}(1+\frac 1{0.005})-\frac 1{0.005}} {\frac {1-1.005^{-239}}{0.005}+1}p=4.9401p$$

### 一本万利
如果将上述问题的20年取款时间无限拉长，那么我们的老年生活将是多么幸福！！毕竟随着科技的发展人类寿命也在增长中。

对于这个问题的探讨需要参考动力系统平衡点稳定性的认识[@] 假定讨论年金差分方程如下，设初始金额为$a_0$,月利率依然是$0.5\\%$,即：
$$
\begin{cases}
a_n=(1+0.5\\%)a_{n-1}-c=1.005a_{n-1}-c\\\\
a_1=a_0-c
\end{cases}$$

平衡点由$x=1.005x-c$,解出$x^\ast=\frac c {0.005}$ 如果平衡点稳定，随着时间虽然每个月取款c元，每个月余额$a_n$将稳定在$x^\ast$处。这样就形成了一本万利花也花不完的局面了，可惜根据稳定点判定法$|a|\gt 1$(a=1.005)  时$\lim_{n \to \infty}a_n=x^\ast$,       $x^\ast$为不稳定平衡点。

系统$a_n$随n变化的行为将如何发展呢？对不同的c 做数学实验便知，设$a_0=200000$,若每个月取5000元，钱很快就用完了。但如果每个月只取800元，则终生不怕取取完，还能无限增长。

<!-- ```{.py2image caption="This is an image, created by **Python**."} 
 def  repay(gain):
	pool=200000
	surplus=pool - gain
	n=1
	a=[] #每月结余钱数
	a.append(200000)
	while(surplus >=0 and surplus<6000000):
		a.append(surplus)
		surplus=surplus*1.005-gain
		n+=1

	return n,a

n,a=repay(5000)

m,b=repay(800)


import matplotlib.pyplot as plt

print(a)
print(n)
month = [i for i in range(0,n)]
month2 = [i for i in range(0,m)]
fig, axs = plt.subplots(1,2)
axs[0].plot(month,a,linestyle='None',marker='o')
#axs[0].vlines(month,0,a)
axs[0].set_xlabel('month')
axs[0].set_ylabel('surplus')
axs[0].set_title("c=5000")

axs[1].plot(month2,b,linestyle='None',marker='o')
axs[1].set_xlabel('month')
axs[1].set_ylabel('surplus')
axs[1].set_title("c=800")
plt.show()-->
<!--```-->
[[/image/wanli.png|height=450px]]
**原来吃老本也是有学问的呀！！**

## digest